<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Slider Pro</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
    }
    h1 {
      text-align: center;
      font-family: Arial, sans-serif; 
      margin-bottom: 100px;
      font-size: 36px;
    }

    .title {
      text-align: center;
      margin-bottom: 20px;
    }

    .box {
      position: relative;
      width: 400px;
      height: 200px;
      border: 2px solid black;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      overflow: hidden;
      background-color: #8edcf0; /* Color de fondo del contenedor */
    }

    .swiper-container {
      width: 100%;
      height: 100%;
    }

    .swiper-slide {
      display: none; /* Oculta todas las diapositivas por defecto */
    }

    .swiper-slide.active {
      display: block; /* Muestra solo la diapositiva activa */
    }

    .pdf-viewer, .video-viewer, .text-content {
      width: 100%;
      height: 100%;
    }

    .text-content {
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0; /* A침adido para eliminar el margen predeterminado del p치rrafo */
      height: 100%; /* A침adido para asegurar que el texto ocupe toda la altura */
    }
  </style>
</head>
<body>

<h1 class="title">Slider Pro</h1>

<div class="box">
  <div class="swiper-container swiper1">
    <div class="swiper-wrapper">
      <div class="swiper-slide active">
        <embed class="pdf-viewer" src="doc/Garda_2022.pdf" type="application/pdf"/>
      </div>
      <div class="swiper-slide">
        <iframe class="video-viewer"
        src="https://www.youtube.com/embed/7Yrc2C-58SU?autoplay=0&amp;controls=0&amp;rel=0&amp;showinfo=0&amp;mute=1&amp;enablejsapi=1"
          frameborder="0" allowfullscreen></iframe>
      </div>
      <div class="swiper-slide">
        <p class="text-content">Este es el texto que aparecer치 en el slide</p>
      </div>
    </div>
  </div>
  <button id="prevButton" style="position: absolute; left: 10px;">Anterior</button>
  <button id="nextButton" style="position: absolute; right: 10px;">Siguiente</button>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const slides = document.querySelectorAll('.swiper-slide');
    let currentSlideIndex = 0;
    let sliderInterval;
    let videoPlayer;


    function nextSlide() {
      if (videoPlayer) {
        videoPlayer.stopVideo(); // Detener el video antes de cambiar de diapositiva
      }
      slides[currentSlideIndex].classList.remove('active');
      currentSlideIndex = (currentSlideIndex + 1) % slides.length;
      slides[currentSlideIndex].classList.add('active');
      handleSlideContent();
    }

    function prevSlide() {
      if (videoPlayer) {
        videoPlayer.stopVideo();
      }
      slides[currentSlideIndex].classList.remove('active');
      currentSlideIndex = (currentSlideIndex - 1 + slides.length) % slides.length;
      slides[currentSlideIndex].classList.add('active');
      handleSlideContent();
    }

    function handleSlideContent() {
      const currentSlide = slides[currentSlideIndex];
      if (currentSlide.querySelector('.pdf-viewer')) {
        console.log('PDF Viewer detected');
        startSliderInterval();
      } else if (currentSlide.querySelector('.video-viewer')) {
        console.log('Video Viewer detected');
        handleVideoPlayback(currentSlide.querySelector('.video-viewer'));
      } else if (currentSlide.querySelector('.text-content')) {
        console.log('Text content detected');
        startSliderInterval();
      }
    }

    function handleVideoPlayback(videoIframe) {
      if (!videoIframe.hasAttribute('data-player-initialized')) {
        videoPlayer = new YT.Player(videoIframe, {
          events: {
            'onReady': function (event) {
              event.target.unMute();
              clearInterval(sliderInterval);
              event.target.playVideo();
            },
            'onStateChange': function (event) {
              if (event.data === YT.PlayerState.ENDED) {
                nextSlide();
              }
            }
          }
        });
        videoIframe.setAttribute('data-player-initialized', 'true');
      } else {
        videoIframe.contentWindow.postMessage('{"event":"command","func":"' + 'playVideo' + '","args":""}', '*');
      }
    }

    function startSliderInterval() {
      clearInterval(sliderInterval);
      sliderInterval = setInterval(nextSlide, 5000);
    }

    startSliderInterval();

    document.getElementById('nextButton').addEventListener('click', function() {
      clearInterval(sliderInterval);
      nextSlide();
    });

    document.getElementById('prevButton').addEventListener('click', function() {
      clearInterval(sliderInterval);
      prevSlide();
    });
  });
</script>


<!-- Script de la API de YouTube (necesario para incrustar videos de YouTube) -->
<script src="https://www.youtube.com/iframe_api"></script>

</body>
</html>
